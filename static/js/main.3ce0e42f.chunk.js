(this.webpackJsonpfood_vision_mobile=this.webpackJsonpfood_vision_mobile||[]).push([[0],{465:function(e,a,t){e.exports=t(626)},470:function(e,a,t){},476:function(e,a){},477:function(e,a){},485:function(e,a){},487:function(e,a){},488:function(e,a){},623:function(e,a,t){},624:function(e){e.exports=JSON.parse('{"apple_pie":0,"baby_back_ribs":1,"baklava":2,"beef_carpaccio":3,"beef_tartare":4,"beet_salad":5,"beignets":6,"bibimbap":7,"bread_pudding":8,"breakfast_burrito":9,"bruschetta":10,"caesar_salad":11,"cannoli":12,"caprese_salad":13,"carrot_cake":14,"ceviche":15,"cheese_plate":16,"cheesecake":17,"chicken_curry":18,"chicken_quesadilla":19,"chicken_wings":20,"chocolate_cake":21,"chocolate_mousse":22,"churros":23,"clam_chowder":24,"club_sandwich":25,"crab_cakes":26,"creme_brulee":27,"croque_madame":28,"cup_cakes":29,"deviled_eggs":30,"donuts":31,"dumplings":32,"edamame":33,"eggs_benedict":34,"escargots":35,"falafel":36,"filet_mignon":37,"fish_and_chips":38,"foie_gras":39,"french_fries":40,"french_onion_soup":41,"french_toast":42,"fried_calamari":43,"fried_rice":44,"frozen_yogurt":45,"garlic_bread":46,"gnocchi":47,"greek_salad":48,"grilled_cheese_sandwich":49,"grilled_salmon":50,"guacamole":51,"gyoza":52,"hamburger":53,"hot_and_sour_soup":54,"hot_dog":55,"huevos_rancheros":56,"hummus":57,"ice_cream":58,"lasagna":59,"lobster_bisque":60,"lobster_roll_sandwich":61,"macaroni_and_cheese":62,"macarons":63,"miso_soup":64,"mussels":65,"nachos":66,"omelette":67,"onion_rings":68,"oysters":69,"pad_thai":70,"paella":71,"pancakes":72,"panna_cotta":73,"peking_duck":74,"pho":75,"pizza":76,"pork_chop":77,"poutine":78,"prime_rib":79,"pulled_pork_sandwich":80,"ramen":81,"ravioli":82,"red_velvet_cake":83,"risotto":84,"samosa":85,"sashimi":86,"scallops":87,"seaweed_salad":88,"shrimp_and_grits":89,"spaghetti_bolognese":90,"spaghetti_carbonara":91,"spring_rolls":92,"steak":93,"strawberry_shortcake":94,"sushi":95,"tacos":96,"takoyaki":97,"tiramisu":98,"tuna_tartare":99,"waffles":100}')},626:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),c=t(59),o=t.n(c),i=(t(470),t(6)),l=t.n(i),s=t(14),m=t(8),u=t(662),d=t(667),f=t(670),p=t(656),h=t(427),_=t.n(h),g=t(226),b=t(409),v=t.n(b),E=t(661),k=t(658),y=t(668),w=t(410),x=t.n(w),j=t(628),O=t(659),S=t(660);function C(){return r.a.createElement(p.a,{container:!0,spacing:1,alignItems:"center",justify:"center"},r.a.createElement(p.a,{item:!0}," ",r.a.createElement(x.a,null)),r.a.createElement(p.a,{item:!0},r.a.createElement(j.a,{variant:"body2",color:"textSecondary",align:"center"},r.a.createElement(k.a,{color:"inherit",href:"https://github.com/tomwalchak"},"@tomwalchak"))))}var N=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},grey:{color:"grey"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),z=function(e){var a=e.handleClick,t=e.modelLoaded,n=N();return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(E.a,null),r.a.createElement("div",{className:n.paper},r.a.createElement(j.a,{component:"h1",variant:"h4"},"\ud83c\udf54 \ud83d\udc40 \ud83d\udcf1"),r.a.createElement(j.a,{component:"h1",variant:"h5"},"Welcome to Food Vision Mobile!"),r.a.createElement(j.a,{component:"p",variant:"subtitle2",className:n.grey},"(Works best on a smartphone)"),r.a.createElement(u.a,{fullWidth:!0,variant:"contained",color:"secondary",className:n.submit,onClick:function(){console.log(t),t&&a()}},t?"Let's go! \ud83e\uddd1\u200d\ud83c\udf73 ":"Loading models... \ud83e\udd16 \ud83e\uddbe (~100Mb \ud83e\udd7a) ")),r.a.createElement(y.a,{mt:8},r.a.createElement(C,null)))},M=t(663),I=t(425),A=t(426),D=t(429);function W(e){var a=e.data;return r.a.createElement(M.a,{width:400,height:170,data:a,layout:"vertical",fill:"#fff",margin:{top:10}},r.a.createElement(I.a,{type:"number",domain:[0,100],tickFormatter:function(e){return"".concat(e,"%")}}),r.a.createElement(A.a,{type:"category",dataKey:"food",tick:{fill:"white",fontSize:12},width:140}),r.a.createElement(D.a,{dataKey:"prob",fill:"#fff"}))}t(623);var B=t(624);var L=function(){var e=Object(n.useRef)(null),a=r.a.useState(null),t=Object(m.a)(a,2),c=t[0],o=t[1],i=r.a.useState(null),h=Object(m.a)(i,2),b=h[0],E=h[1],k=r.a.useState(null),y=Object(m.a)(k,2),w=y[0],x=y[1],j=Object(n.useState)(!1),O=Object(m.a)(j,2),S=O[0],C=O[1],N=Object(n.useState)(!0),M=Object(m.a)(N,2),I=M[0],A=M[1],D=Object(n.useState)(),L=Object(m.a)(D,2),T=L[0],F=L[1],q=function(e){var a={};for(var t in e)a[e[t]]=t;return a}(B),J=g.c(255),K=function(e){var a=e.currentTarget.dataset.myValue;console.log(a),o(null)},P=function(){var e=Object(s.a)(l.a.mark((function e(){var a,t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,e.next=3,g.b("/models/mobilenet_v2_js_model/model.json");case 3:t=e.sent,n=new Date-a,console.log("Model loaded, took ".concat(n," ms")),C(!0),x(n),setInterval((function(){R(t)}),1e3);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var a=Object(s.a)(l.a.mark((function a(t){var n,r,c,o,i,s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"undefined"!==typeof e.current&&null!==e.current&&4===e.current.video.readyState&&(n=e.current.video,r=g.a.fromPixels(n),c=r.div(J).expandDims(0),o=new Date,i=t.predict(c),s=new Date-o,E(s),F(i));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){P()}),[]),I?r.a.createElement(z,{handleClick:function(){console.log("click!"),A(!1)},modelLoaded:S}):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(p.a,{container:!0,spacing:1,alignItems:"center",style:{fontSize:20,margin:"0px auto"}},r.a.createElement(p.a,{item:!0,xs:!0,style:{textAlign:"right"}},"Try model: \ud83e\udd16"," "),r.a.createElement(p.a,{item:!0,xs:!0,style:{textAlign:"left"}}," ",r.a.createElement(u.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},variant:"contained",color:"secondary",size:"small",endIcon:r.a.createElement(_.a,null)},"ResNet50_10_pc_Food101_80Mb")))," ",r.a.createElement(d.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:K},r.a.createElement(f.a,{"data-my-value":"eff_net1",onClick:K},"EfficientNetB0"),r.a.createElement(f.a,{"data-my-value":"eff_net2",onClick:K},"EfficientNetB0 100 % data"),r.a.createElement(f.a,{"data-my-value":"eff_net3",onClick:K},"EfficientNetB0 MixedPrecision"))),r.a.createElement("div",{className:"App-body"},r.a.createElement(v.a,{ref:e,height:224,width:224,videoConstraints:{width:224,height:224,facingMode:"environment"},muted:!0,style:{zindex:8,width:"100vw",height:"100%"}}),r.a.createElement("div",{style:{position:"absolute",padding:10,bottom:0,width:"80%",maxWidth:450,height:250,backgroundColor:"#000",textAlign:"left",fontSize:14,zindex:9,opacity:.8}},T&&"What \ud83c\udf54 \ud83c\udf55 \ud83c\udf4f  is this? \ud83d\udc40"," ",r.a.createElement("br",null),function(e){var a=e.preds,t=e.food_classes;if(!a)return"Loading predictions.. \ud83e\udd16";var n=g.d(a,5,!0),c=n.values.dataSync(),o=n.indices.dataSync(),i=[];return o.forEach((function(e,a){i.push({food:t[e],prob:Math.round(1e3*c[a])/10})})),r.a.createElement(W,{data:i})}({preds:T,food_classes:q}),T&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Model loaded in: ",w," ms"),r.a.createElement("div",null,"Inference time was: ",b," ms")))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[465,1,2]]]);
//# sourceMappingURL=main.3ce0e42f.chunk.js.map